Navegación en Compose — Guía rápida

1. Dependencias
En app/build.gradle.kts añadir: implementation("androidx.navigation:navigation-compose:2.7.4")


2. Crear enum class MyScreen en la pantalla principal (MyScreen)
Creamos una enum class que actúa como fuente única de verdad para todas las rutas de la app.
Incluye el título de cada pantalla mediante recursos @StringRes.
Se coloca al inicio del composable raíz, tras los imports.


3. En el composable principal pasamos MyViewModel y NavHostController
También inicializamos la entrada de la pila de actividades y el nombre de la pantalla actual.


4. Creamos el composable MyAppBar y lo preparamos para navegación
Se define una TopAppBar que muestra el título de la pantalla actual.
Incluye un botón de retroceso cuando es posible navegar atrás.
Recibe: currentScreen, canNavigateBack, navigateUp.


5. Añadir MyAppBar a la topBar del Scaffold raíz
Incorporamos MyAppBar al parámetro topBar del Scaffold del composable raíz.
Esto garantiza que la barra superior se mantenga visible en todas las pantallas y reaccione automáticamente a los cambios de navegación.


6. Definir el NavHost dentro del Scaffold e instanciar MyUiState


7. Declarar las rutas de la app
Dentro del NavHost definimos todas las pantallas usando composable(route).
Cada entrada asocia la ruta de MyScreen con su composable correspondiente.


8. Añadir funciones de navegación a los botones
Estas funciones pueden combinarse con lógica del ViewModel para actualizar estado antes de navegar.